<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Sync Function | Couchbase Docs Preview Site</title>
<link rel="canonical" href="https://ibsoln.github.io/sync-gateway/2.8/learn/defining-sync-functions.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Defining sync functions for effective data access control">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">
<meta name="dcterms.subject" content="sync-gateway">
<meta name="dcterms.identifier" content="2.8">
<meta name="generator" content="Antora 2.3.3">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">

              <a class="navbar-brand" href="https://www.couchbase.com">
                <img src="../../../_/img/couchbase-documentation-logo.svg" alt="Couchbase" />
              </a>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://ibsoln.github.io/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/cloud.html">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../tutorials/index.html">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <form class="navbar-item search">
                  <input type="text" placeholder="Search Docs" class="query" id="search-query" />
                  <button type="button" class="search-btn">
                    <i class="fas fa-search"></i>
                  </button>
                </form>
                <a class="btn btn-primary try-btn" href="https://www.couchbase.com/downloads">
                  Downloads
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<nav class="nav">
<div class="left-sidebar-menu">
<div class="version-control-box">
<div class="component-frame">
<div class="frame-icon">
<img src="../../../_/img/server-icon.png" alt="">
</div>
<div class="frame-body">
<h4 class="title"><span class="">Sync Gateway</span></h4>
<a class="frame-link component" href="../index.html"> <span class="version">2.8</span></a>
</div>
</div>
</div>
<div class="nav-menu">
<ul class="nav-list">
<li class="nav-item is-current-path is-active is-active-depth-2  " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<a class="nav-link" href="../index.html">Sync Gateway</a>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../sgw-whatsnew.html">What&#8217;s New</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../introduction.html">Start Here!</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../start/gs-sgw-prereqs.html">Prepare</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../start/gs-sgw-install.html">Install</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../start/gs-sgw-config.html">Verify</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../data-modeling.html">Data Modelling</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Concepts</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="users-and-roles.html">Users</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="roles.html">Roles</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="sync-gateway-channels.html">Channels</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="concept-fundamentals-data-tombstones.html">Tombstones</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../refer/config-properties.html">Configuration File</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../start/gs-sgw-api-access.html">REST API Access</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../refer/rest-api-public.html">Public REST API</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../refer/rest-api-admin.html">Admin REST API</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../refer/rest-api-metrics.html">Metrics REST API</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../advance/adv-rest-api-client.html">REST API Client</a>
</span>
</li>
</ul>
</li>
<li class="nav-item is-current-path is-active is-active-depth-2  " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Security</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="authentication.html">User Authentication</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../security.html">TLS Certificate Authentication</a>
</span>
</li>
<li class="nav-item is-current-path is-active is-active-depth-2  " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Access Control</span>
</span>
<ul class="nav-list">
<li class="nav-item is-current-page is-active is-active-depth-2  " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="defining-sync-functions.html">Sync Function</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../advance/adv-sgw-cfg-import-filter.html">Import filter</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="read-access.html">Read Access</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="write-access.html">Write Access</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Sync</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../shared-bucket-access.html">Sync with Couchbase Server</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../sync-from-client.html">Sync with Couchbase Lite</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="icr-sgreplicate.html">Inter-Sync Gateway Replication</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="icr-running.html">Initialize</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="icr-admin.html">Manage</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="icr-monitoring.html">Monitor</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../managing-tombstones.html">Managing Tombstones</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../delta-sync.html">Delta Sync</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../resync.html">Resync</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Manage</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../stats-monitoring.html">Monitor</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Logging and Troubleshooting</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../advance/logging.html">Logging</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../sgcollect-info.html">SG Collect</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../database-offline.html">Take Database Offline/Online</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../deployment.html">Deploy</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../command-line-options.html">Using Command Line</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../load-balancer.html">Load Balancer</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../os-level-tuning.html">OS-level Tuning</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../integrating-external-stores.html">External Stores</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../server-integration.html">Webhooks and Changes Feed</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../indexing.html">Indexing versus Views</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../advance/deploy/upgrade.html">Upgrade</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Use Kubernetes</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../advance/kubernetes/deploy-cluster.html">Deploy</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#operator::tutorial-sync-gateway-manage.adoc">Manage a Sync Gateway Cluster</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#operator::tutorial-sync-gateway-clients.adoc">Expose Sync Gateway to Couchbase Lite clients</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Product Notes</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../prodnotes/pn-release-notes.html">Release Notes</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../prodnotes/pn-supported-os.html">Supported OS</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../prodnotes/pn-compatibility.html">Compatibility Matrix</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Legacy Features</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../resolving-conflicts.html">Conflict Resolution 1.x Clients</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="icr-sgreplicate-sgr1.html">Inter-Sync Gateway Replication pre-2.8</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="logging-legacy-pre2-1.html">Log Rotation pre-2.1</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../refer/refer-sgw-glossary.html">Sync Gateway Glossary</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<a class="nav-link" href="../../../couchbase-lite/2.8/introduction.html">Couchbase Lite</a>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../../couchbase-lite/2.8/android/quickstart.html">Android (Java)</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../../couchbase-lite/2.8/csharp/quickstart.html">C#</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../../couchbase-lite/2.8/java/quickstart.html">Java</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../../couchbase-lite/2.8/objc/quickstart.html">Objective-C</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../../couchbase-lite/2.8/swift/quickstart.html">Swift</a>
</span>
</li>
</ul>
</li>
</ul>
</div>
<a href="#" class="menu-expand-toggle"> <span>Navigation</span> <i class="fas fa-times-circle"></i> <i class="fas fa-chevron-circle-left"></i></a>
</div></nav>
<aside class="toc sidebar">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/ianbridge/CouchbaseDocs/bau/sgw/modules/ROOT/pages/learn/defining-sync-functions.adoc" title="Edit Page" target="_blank" rel="noopener">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">Sync Gateway</a></li>
<li class="crumb">Security</li>
<li class="crumb">Access Control</li>
<li class="crumb"><a href="defining-sync-functions.html">Sync Function</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Sync Function</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p>Description&#8201;&#8212;&#8201;<em>Defining sync functions for effective data access control</em><br>
<em>Abstract&#8201;&#8212;&#8201;This content provides an overview of sync function definition describing th options and providing a working example.</em><br>
Related Content&#8201;&#8212;&#8201;<a href="../refer/config-properties.html" class="page">Configuration File</a>  |  <a href="../refer/rest-api-admin.html" class="page">Admin REST API</a> |    <a href="../refer/config-properties.html#databases" class="page">databases</a>  |  <a href="../refer/config-properties.html#databases-this_db-sync" class="page">sync</a></p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sync-function-basics"><a class="anchor" href="#sync-function-basics"></a>Sync Function Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Sync Function is a JavaScript function whose source code is stored in the Sync Gateway&#8217;s database configuration file. You can learn more about this property ($db.sync) in the Configuration Schema Reference&#8201;&#8212;&#8201;see: <a href="../refer/config-properties.html#databases-this_db-sync" class="page">sync</a>.</p>
</div>
<div class="paragraph">
<p>The sync function is called every time a new revision/update is made to a document, and the changes to channels and access made by the sync function are <em>tied to that revision</em>.
If the document is later updated, the sync function will be called again on the new revision, and the new channel assignments and user/channel access <em>replace</em> the ones from the first call.</p>
</div>
<div class="paragraph">
<p>It can do the following things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Validate documents&#8201;&#8212;&#8201;see: <a href="write-access.html#data-validation" class="page">Write Access&#8201;&#8212;&#8201;data validation</a></p>
</li>
<li>
<p>Authorize changes&#8201;&#8212;&#8201;see: <a href="write-access.html#write-access" class="page">Write Access&#8201;&#8212;&#8201;authorize the change</a></p>
</li>
<li>
<p>Grant user access to channels&#8201;&#8212;&#8201;see: <a href="read-access.html" class="page">Read Access&#8201;&#8212;&#8201;add access</a></p>
</li>
<li>
<p>Assign documents to channels&#8201;&#8212;&#8201;see: <a href="sync-gateway-channels.html#add-to-channel" class="page">Channels&#8201;&#8212;&#8201;add to channel</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For simple applications it might be the only server-side code you need to write.
For more complex applications it is still a primary touchpoint for managing data routing and access control.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add the <code>sync</code> function defined into your <code>sync-gateway-config.json</code>&#8201;&#8212;&#8201;see <a href="#sync-example">Example 1</a></p>
</div>
<div id="sync-example" class="exampleblock">
<div class="title">Example 1. Example Sync Function</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/ibsoln/docs-sync-gateway/blob/undefined/modules/ROOT/examples/configuration/sync-gateway-config.json#L94-L118">//
{
  //  ... may be preceded by additional configuration data as required by the user ...
  "databases": {
    "getting-started-db": {
      "server": "http://localhost:8091",
      "bucket": "getting-started-bucket",
      "username": "sync_gateway", <i class="conum" data-value="1"></i><b>(1)</b>
      "password": "password", <i class="conum" data-value="2"></i><b>(2)</b>
      "enable_shared_bucket_access": true, <i class="conum" data-value="3"></i><b>(3)</b>
      "import_docs": true,
      "num_index_replicas": 0, <i class="conum" data-value="4"></i><b>(4)</b>
      "users": {
        "GUEST": { "disabled": false, "admin_channels": ["*"] },
      },
      "sync": `function (doc, oldDoc) { <i class="conum" data-value="5"></i><b>(5)</b>
        if (doc.sdk) {
          channel(doc.sdk);
        }
        }`,
        //  ... may be followed by additional configuration data as required by the user ...
    }
  }
}
//</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration properties:</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is the username of the user you created on the Couchbase Server Admin Console.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The password of the user that you created on the Couchbase Server Admin Console.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <a href="../shared-bucket-access.html" class="page">Sync with Couchbase Server</a> feature allows Couchbase Server SDKs to also perform operations on this bucket.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>num_index_replicas</code> is the number of index replicas stored in Couchbase Server, introduced with GSI/N1QL indexing&#8201;&#8212;&#8201;see <a href="../indexing.html" class="page">Indexing versus Views</a>.
If you&#8217;re running a single Couchbase Server node for development purposes the <code>num_index_replicas</code> must be set to <code>0</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The sync function&#8201;&#8212;&#8201;a javascript function enclosed in backticks, which is actioned every time a new document, document revision or deletion is made to a database&#8201;&#8212;&#8201;see the:
<a href="../refer/config-properties.html#databases-this_db-sync" class="page">databases.$db.sync</a> property.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="function-definition"><a class="anchor" href="#function-definition"></a>Function Definition</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>The sync function is crucial to the security of your application.</strong>
It is in charge of data validation, and of authorizing both read and write access to documents.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The sync function should be a focus of any security review of your application.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The API is high-level, enabling you to do some powerful things very simply. However, you do need to remain vigilant. Review the function carefully to ensure it detects threats and prevents any illegal access.</p>
</div>
<div class="paragraph">
<p>You write your sync function in JavaScript and provide it in the <code>sync</code> property of the appropriate database in your <code>sync-gateway-config.json</code> file.</p>
</div>
<div class="paragraph">
<p>The basic structure of the sync function, within the configuration file, looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">sync: `
function (doc, oldDoc) {
    // Your code here
}
`</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Remember to include your JavaScript code within a pair of back ticks  (<code>`</code>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The sync function arguments are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>doc</code></dt>
<dd>
<p>An object, the content of the document that is being saved.
This matches the JSON that was saved by the Couchbase Lite and replicated to Sync Gateway.
The <code>_id</code> property contains the document ID, and the <code>_rev</code> property the new revision ID.
If the document is being deleted, there will be a <code>_deleted</code> property with the value true.</p>
</dd>
<dt class="hdlist1"><code>oldDoc</code></dt>
<dd>
<p>If the document has been saved before, the revision that is being replaced is available in this argument.
Otherwise it&#8217;s <code>null</code>.
(In the case of a document with conflicts, the current provisional winning revision is passed in <code>oldDoc</code>.)
Your implementation of the sync function can omit the <code>oldDoc</code> parameter if you do not need it (JavaScript ignores extra parameters passed to a function).</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>If you don&#8217;t supply a sync function, Sync Gateway uses the <a href="../refer/config-properties.html#databases-this_db-sync" class="page">default Sync Function</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="channelchannelname"><a class="anchor" href="#channelchannelname"></a>channel(channelname)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Sync Function provides the <code>channel()</code> function to route the document to the named channel(s).
It accepts one or more arguments, each of which must be a channel name string, or an array of strings.
The channel function can be called zero or more times from the sync function, for any document.</p>
</div>
<div class="paragraph">
<p>Here is an example that routes all "published" documents to the "public" channel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function (doc, oldDoc) {
   if (doc.published) {
      channel("public");
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Routing changes has no effect until the document is actually saved in the database, so if the sync function first calls <code>channel()</code> or <code>access()</code>, but then rejects the update, the channel and access changes will not occur.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
As a convenience, it is legal to call <code>channel</code> with a <code>null</code> or <code>undefined</code> argument; it simply does nothing.
This allows you to do something like <code>channel(doc.channels)</code> without having to first check whether <code>doc.channels</code> exists.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Channels don&#8217;t have to be predefined.
A channel implicitly comes into existence when a document is routed to it.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="accessusername-channelname"><a class="anchor" href="#accessusername-channelname"></a>access(username, channelname)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Documents can grant users access to channels.
The <code>access()</code> function grants access to a channel to a specified user.
It can be called multiple times from a sync function.</p>
</div>
<div class="paragraph">
<p>The first argument can be an array of strings, in which case each user in the array is given access.
The second argument can also be an array of strings, in which case the user(s) are given access to each channel in the array.
As a convenience, either argument may be <code>null</code> or <code>undefined</code>, in which case nothing happens.</p>
</div>
<div class="paragraph">
<p>If a user name begins with the prefix <code>role:</code>, the rest of the name is interpreted as a role rather than a user.
The call then grants access to the specified channels for all users with that role.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The effects of all access calls by all active documents are effectively unioned together, so if <em>any</em> document grants a user access to a channel, that user has access to the channel.
Calling <code>access(username, channelname)</code> multiple times to grant the same user access to the same channel will result in negative performance implications.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following code snippets shows some valid ways to call <code>access()</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">access ("jchris", "mtv");
access ("jchris", ["mtv", "mtv2", "vh1"]);
access (["snej", "jchris", "role:admin"], "vh1");
access (["snej", "jchris"], ["mtv", "mtv2", "vh1"]);
access (null, "hbo");  // no-op
access ("snej", null);  // no-op</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="roleusername-rolename"><a class="anchor" href="#roleusername-rolename"></a>role(username, rolename)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>role()</code> function grants a user a role, indirectly giving them access to all channels granted to that role.
It can also affect the user&#8217;s ability to revise documents, if the access function requires role membership to validate certain types of changes.
Its use is similar to <code>access</code>&#8201;&#8212;&#8201;the value of either parameter can be a string, an array of strings, or null.
If the value is null, the call is a no-op.</p>
</div>
<div class="paragraph">
<p>For consistency with the <code>access</code> call, role names must always be prefixed with <code>role:</code>.
An exception is thrown if a role name doesn&#8217;t match this.
Some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">role ("jchris", "role:admin");
role ("jchris", ["role:portlandians", "role:portlandians-owners"]);
role (["snej", "jchris", "traun"], "role:mobile");
role ("ed", null);  // no-op</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Roles, like users, have to be explicitly created by an administrator.
So unlike channels, which come into existence simply by being named, you can&#8217;t create new roles with a <code>role()</code> call.
Nonexistent roles don&#8217;t cause an error, but have no effect on the user&#8217;s access privileges.
You can create a role after the fact; as soon as a role is created, any pre-existing references to it take effect.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="requireuserusername"><a class="anchor" href="#requireuserusername"></a>requireUser(username)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>requireUser()</code> function authorizes a document update by rejecting it unless it&#8217;s made by a specific user or users, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">// Throw an error if username is not "snej":
requireUser("snej");

// Throw an error if username is not in the list:
requireUser(["snej", "jchris", "tleyden"]);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The function signals rejection by throwing an exception, so the rest of the sync function will not be run.
All properties of the <code>doc</code> parameter should be considered <em>untrusted</em>, since this is after all the object that you&#8217;re validating.
This may sound obvious, but it can be easy to make mistakes, like calling <code>requireUser(doc.owners)</code> instead of <code>requireUser(oldDoc.owners)</code>.
When using one document property to validate another, look up that property in <code>oldDoc</code>, not <code>doc</code>!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="requirerolerolename"><a class="anchor" href="#requirerolerolename"></a>requireRole(rolename)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>requireRole()</code> function authorizes a document update by rejecting it unless the user making it has a specific role or roles, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">// Throw an error unless the user has the "admin" role:
requireRole("admin");

// Throw an error unless the user has one or more of those roles:
requireRole(["admin", "old-timer"]);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The argument may be a single role name, or an array of role names.
In the latter case, the user making the change must have one or more of the given roles.</p>
</div>
<div class="paragraph">
<p>The function signals rejection by throwing an exception, so the rest of the sync function will not be run.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="requireaccesschannels"><a class="anchor" href="#requireaccesschannels"></a>requireAccess(channels)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>requireAccess()</code> function authorizes a document update by rejecting it unless the user making it has access to at least one of the given channels, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">// Throw an exception unless the user has access to read the "events" channel:
requireAccess("events");

// Throw an exception unless the user can read one of the channels in the
// previous revision's "channels" property:
if (oldDoc) {
    requireAccess(oldDoc.channels);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The function signals rejection by throwing an exception, so the rest of the sync function will not be run.</p>
</div>
<div class="paragraph">
<p>If a user was granted access to the <a href="sync-gateway-channels.html#special-channels" class="page">star channel</a> (noted <code>*</code>), a call to <code>requireAccess('any channel name')'</code> will fail because the user wasn&#8217;t granted access to that channel (only to the <code>*</code> channel). To allow a user to perform a document update in this case, you can specify multiple channel names (<code>requireAccess('any channel name', '*')'</code>)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="requireadmin"><a class="anchor" href="#requireadmin"></a>requireAdmin()</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>requireAdmin()</code> function authorizes a document update by rejecting it unless it is being sent to the Sync Gateway Admin REST API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">// Throw an exception unless the request is sent to the Admin REST API
requireAdmin();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="throw"><a class="anchor" href="#throw"></a>throw()</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At the most basic level, the sync function can prevent a document from persisting or syncing to any other users by calling <code>throw()</code> with an error object containing a <code>forbidden</code>: property.
You enforce the validity of document structure by checking the necessary constraints and throwing an exception if they&#8217;re not met.</p>
</div>
<div class="paragraph">
<p>Here is an example sync function that disallows all writes to the database it is in.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function(doc) {
   throw({forbidden: "read only!"})
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The document update will be rejected with an HTTP 403 "Forbidden" error code, with the value of the <code>forbidden:</code> property being the HTTP status message.
This is the preferred way to reject an update.</p>
</div>
<div class="paragraph">
<p>In validating a document, you&#8217;ll often need to compare the new revision to the old one, to check for illegal changes in state.
For example, some properties may be immutable after the document is created, or may be changeable only by certain users, or may only be allowed to change in certain ways.
That&#8217;s why the current document contents are given to the sync function, as the <code>oldDoc</code> parameter.</p>
</div>
<div class="paragraph">
<p>We recommend that you not create invalid documents in the first place.
As much as possible, your app logic and validation function should prevent invalid documents from being created locally.
The server-side sync function validation should be seen as a fail-safe and a guard against malicious access.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="expiryvalue"><a class="anchor" href="#expiryvalue"></a>expiry(value)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Calling <code>expiry(value)</code> from within the sync function will set the expiry value (TTL) on the document.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">expiry("2018-07-06T17:00:00+01:00")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Under the hood, the expiration time is set and managed on the Couchbase Server document (TTL is not supported for databases in walrus mode). The value can be specified in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ISO-8601 format:</strong> for example the 6th of July 2016 at 17:00 in the BST timezone would be <code>2016-07-06T17:00:00+01:00</code>;</p>
</li>
<li>
<p><strong>as a numeric Couchbase Server expiry value:</strong> Couchbase Server expiries are specified as Unix time, and if the desired TTL is below 30 days then it can also represent an interval in seconds from the current time (for example, a value of 5 will remove the document 5 seconds after it is written to Couchbase Server).
The document expiration time is returned in the response of GET <a href="../refer/rest-api-public.html#/document/get__db___doc_" class="page">/{tkn-db}/{doc}</a> when <code>show_exp=true</code> is included in the querystring.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The behavior on the resulting document when the expiry value is reached depends on the following:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">if <a href="../shared-bucket-access.html" class="page">Mobile-Web Data Sync</a> is enabled</dt>
<dd>
<p>The <strong>active</strong> revision of the document is tombstoned.
If there is another non-tombstoned revision for this document (i.e a conflict) it will become the active revision.
The tombstoned revision will be purged when the server&#8217;s metadata purge interval is reached.</p>
</dd>
<dt class="hdlist1">if <a href="../shared-bucket-access.html" class="page">Mobile-Web Data Sync</a> is disabled</dt>
<dd>
<p>The document will be purged from the database.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>As with the existing explicit purge mechanism, this applies only to the local database; it has nothing to do with replication.
This expiration time is not propagated when the document is replicated.
The purge of the document does not cause it to be deleted on any other database.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="document-conflicts"><a class="anchor" href="#document-conflicts"></a>Document Conflicts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If a document is in conflict there will be multiple current revisions.
The default, "winning" one is the one whose channel assignments and access grants take effect.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="handling-deletions"><a class="anchor" href="#handling-deletions"></a>Handling deletions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Validation checks often need to treat deletions specially, because a deletion is just a revision with a <code>"_deleted": true</code> property and usually nothing else.
Many types of validations won&#8217;t work on a deletion because of the missing properties&#8201;&#8212;&#8201;for example, a check for a required property, or a check that a property value doesn&#8217;t change.
You&#8217;ll need to skip such checks if <code>doc._deleted</code> is true.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="example"><a class="anchor" href="#example"></a>Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here&#8217;s an example of a complete, useful sync function that properly validates and authorizes both new and updated documents.
The requirements are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only users with the role <code>editor</code> may create or delete documents.</p>
</li>
<li>
<p>Every document has an immutable <code>creator</code> property containing the name of the user who created it.</p>
</li>
<li>
<p>Only users named in the document&#8217;s (required, non-empty) <code>writers</code> property may make changes to a document, including deleting it.</p>
</li>
<li>
<p>Every document must also have a <code>title</code> and a <code>channels</code> property.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function (doc, oldDoc) {
  if (doc._deleted) {
    // Only editors with write access can delete documents:
    requireRole("role:editor");
    requireUser(oldDoc.writers);
    // Skip other validation because a deletion has no other properties:
    return;
  }
  // Required properties:
  if (!doc.title || !doc.creator || !doc.channels || !doc.writers) {
    throw({forbidden: "Missing required properties"});
  } else if (doc.writers.length == 0) {
    throw({forbidden: "No writers"});
  }
  if (oldDoc == null) {
    // Only editors can create documents:
    requireRole("role:editor");
    // The 'creator' property must match the user creating the document:
    requireUser(doc.creator)
  } else {
    // Only users in the existing doc's writers list can change a document:
    requireUser(oldDoc.writers);
    // The "creator" property is immutable:
    if (doc.creator != oldDoc.creator) {
            throw({forbidden: "Can't change creator"});
    }
  }
  // Finally, assign the document to the channels in the list:
  channel(doc.channels);
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="related-content"><a class="anchor" href="#related-content"></a>Related Content</h2>
<div class="sectionbody">
<div class="card-row three-column-row">
<div class="sect5 column">
<h6 id=""><a class="anchor" href="#"></a></h6>
<div class="ulist">
<div class="title">Learn more ...</div>
<ul>
<li>
<p><a href="defining-sync-functions.html" class="page">Sync Function</a></p>
</li>
<li>
<p><a href="../advance/adv-sgw-cfg-sync-function.html" class="page">Use Sync functions?</a></p>
</li>
<li>
<p><a href="../advance/adv-sgw-cfg-import-filter.html" class="page">Import filter</a></p>
</li>
<li>
<p><a href="icr-sgreplicate.html" class="page">Inter-Sync Gateway Replication</a></p>
</li>
<li>
<p><a href="../shared-bucket-access.html" class="page">Sync with Couchbase Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-2"><a class="anchor" href="#-2"></a></h6>
<div class="ulist">
<div class="title">Reference material ...</div>
<ul>
<li>
<p><a href="../refer/rest-api-public.html" class="page">Public REST API</a></p>
</li>
<li>
<p><a href="../refer/rest-api-admin.html" class="page">Admin REST API</a></p>
</li>
<li>
<p><a href="../refer/rest-api-metrics.html" class="page">Metrics REST API</a></p>
</li>
<li>
<p><a href="../advance/adv-rest-api-client.html" class="page">Use the REST API?</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-3"><a class="anchor" href="#-3"></a></h6>
<div class="ulist">
<div class="title">Community</div>
<ul>
<li>
<p><a href="https://forums.couchbase.com/c/mobile/14">Forum</a>  <strong>|</strong>  <a href="https://blog.couchbase.com/">Blog</a>   <strong>|</strong>  <a href="https://docs.couchbase.com/tutorials/index.html">Tutorials</a></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Sync Function Blogs</div>
<ul>
<li>
<p><a href="https://blog.couchbase.com/augment-your-sync-function-with-roles-in-couchbase-sync-gateway/">Using roles in sync functions</a></p>
</li>
<li>
<p><a href="https://blog.couchbase.com/data-synchronization-offline-first-apps-couchbase/">Tutorial: Getting Started with Data Synchronization using Couchbase Mobile for Offline-First Apps</a></p>
</li>
<li>
<p><a href="https://blog.couchbase.com/tag/sync-function/">Sync Function (category)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase_logo_black.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span> 2021 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
