<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>User Profile Sample: Couchbase Lite Fundamentals | Couchbase Docs</title>
<link rel="canonical" href="https://ibsoln.github.io/stage/3.0-GA/tutorials/userprofile-standalone-android/userprofile_basic.html">
<link rel="stylesheet" href="../../_/css/site.css">
<script src="../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="tutorials">
<meta name="dcterms.identifier" content="master">
<meta name="page-url" content="/tutorials/userprofile-standalone-android/userprofile_basic.html">
<meta name="generator" content="Antora 3.0.0-alpha.5">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://ibsoln.github.io/stage/3.0-GA/home/index.html">
                    <img src="../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://ibsoln.github.io/stage/3.0-GA/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/mobile.html">
                      Mobile Stage
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/cloud.html">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../index.html">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
<div class="components">
  <div class="components_group-title">
    <a href="../index.html">Tutorials</a>
  </div>
  <ul class="components_list">
    <li class="components_list-items">
      <div class="component_list-version">
        <span class="component_list_title">Tutorials</span>
      </div>
      <div class="version_items hide" data-version="master">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Couchbase Server</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#:session-storage:partial$nav.adoc">:session-storage:partial$nav.adoc</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <span class="menu_title menu_text">User Profile Storage
Unresolved include directive in modules/ROOT/nav.adoc - include::profile-store:partial$nav.adoc[]</span>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Couchbase Mobile</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Couchbase Mobile Workshop</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/introduction.html">Introduction</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="2">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Swift</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="3">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/swift/installation/index.html">Backend Installation</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/swift/installation/manual.html">Manual</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/swift/installation/docker.html">Docker (Local)</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/swift/installation/cloud.html">Cloud (RightScale)</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/swift/installation/travel-mobile-app.html">Installation</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/swift/design/data-modeling.html">Data Modeling</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/swift/develop/mvp-architecture.html">MVP Architecture</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/swift/develop/the-basics.html">The Basics</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/swift/develop/security.html">Security</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/swift/develop/sync.html">Sync</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/swift/develop/pre-built-database.html">Pre-built database</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/swift/develop/query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/swift/develop/full-text-search.html">Full Text Search</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="2">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Android-Java</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="3">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/android/installation/index.html">Backend Installation</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/android/installation/manual.html">Manual</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/android/installation/docker.html">Docker (Local)</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/android/installation/cloud.html">Cloud (RightScale)</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/android/installation/travel-mobile-app.html">Installation</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/android/design/data-modeling.html">Data Modeling</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/android/develop/mvp-architecture.html">MVP Architecture</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/android/develop/the-basics.html">The Basics</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/android/develop/security.html">Security</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/android/develop/sync.html">Sync</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/android/develop/pre-built-database.html">Pre-built database</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/android/develop/query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/android/develop/full-text-search.html">Full Text Search</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="2">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Java</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="3">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/java/installation/index.html">Backend Installation</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/java/installation/manual.html">Manual</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/java/installation/docker.html">Docker (Local)</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/java/installation/cloud.html">Cloud (RightScale)</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/java/installation/travel-mobile-app.html">Installation</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/java/design/data-modeling.html">Data Modeling</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/java/develop/mvp-architecture.html">MVP Architecture</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/java/develop/the-basics.html">The Basics</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/java/develop/security.html">Security</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/java/develop/sync.html">Sync</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/java/develop/pre-built-database.html">Pre-built database</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/java/develop/query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/java/develop/full-text-search.html">Full Text Search</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="2">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">C#</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="3">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/csharp/installation/index.html">Backend Installation</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/csharp/installation/manual.html">Manual</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/csharp/installation/docker.html">Docker (Local)</a>
  </span>
</li>
<li class="menu_list" data-depth="4">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/csharp/installation/cloud.html">Cloud (RightScale)</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/csharp/installation/travel-mobile-app.html">Installation</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/csharp/design/data-modeling.html">Data Modeling</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/csharp/develop/mvvm-architecture.html">MVVM Architecture</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/csharp/develop/the-basics.html">The Basics</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/csharp/develop/security.html">Security</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/csharp/develop/sync.html">Sync</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/csharp/develop/pre-built-database.html">Pre-built database</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/csharp/develop/query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-travel-tutorial/csharp/develop/full-text-search.html">Full Text Search</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on iOS</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../userprofile-standalone/userprofile_basic.html">Standalone</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../userprofile-query/userprofile_query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../userprofile-sync/userprofile_sync.html">Sync</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on Xamarin</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../userprofile-standalone-xamarin/userprofile_basic.html">Standalone</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../userprofile-query-xamarin/userprofile_query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../userprofile-sync-xamarin/userprofile_sync.html">Sync</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on Android</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-current-page" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link is-current-page" href="userprofile_basic.html">Standalone</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../userprofile-query-android/userprofile_query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../userprofile-sync-android/userprofile_sync.html">Sync</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started with Peer-to-Peer Sync</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../cbl-p2p-sync-websockets/swift/cbl-p2p-sync-websockets.html">iOS/Swift</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../cbl-p2p-sync-websockets/dotnet/cbl-p2p-sync-websockets.html">Xamarin/C#</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Build Your Own</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <span class="menu_title menu_text">Tutorial Template
Unresolved include directive in modules/ROOT/nav.adoc - include::tutorial-template:partial$nav.adoc[]</span>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
    </li>
  </ul>
</div>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/edit/standalone/content/modules/userprofile-standalone-android/pages/userprofile_basic.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">Tutorials</a></li>
<li class="crumb">Couchbase Mobile</li>
<li class="crumb">Getting Started on Android</li>
<li class="crumb"><a href="userprofile_basic.html">Standalone</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">User Profile Sample: Couchbase Lite Fundamentals</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<!-- toc disabled -->
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Mobile brings the power of NoSQL to the edge.
It is comprised of three components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Couchbase Lite</strong>, an embedded, NoSQL JSON Document Style database for your mobile apps.</p>
</li>
<li>
<p><strong>Sync Gateway</strong>, an internet-facing synchronization mechanism that securely syncs data between mobile clients and server.</p>
</li>
<li>
<p><strong>Couchbase Server</strong>, a highly scalable, distributed NoSQL database platform.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Couchbase Mobile supports flexible deployment models.
You can deploy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Couchbase Lite as a standalone embedded database within your mobile apps or</p>
</li>
<li>
<p>Couchbase Lite enabled mobile clients with a Sync Gateway to synchronize data between your mobile clients or,</p>
</li>
<li>
<p>Couchbase Lite enabled clients with a Sync Gateway to sync data between mobile clients and the Couchbase Server, which can persist data in the cloud (public or private)</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">What You Will Learn</div>
<div class="paragraph">
<p>This tutorial will walk you through a very basic example of how you can use <strong>Couchbase Lite in standalone mode</strong> within your
<a href="https://www.android.com"><strong>Android</strong></a>
app.</p>
</div>
<div class="paragraph">
<p>You will learn the fundamentals of</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Database Operations</p>
</li>
<li>
<p>Document CRUD Operations</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>You can learn more about Couchbase Mobile
<a href="https://developer.couchbase.com/mobile">here</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial assumes familiarity with building Android apps using
<a href="https://www.java.com">Java</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://developer.android.com/studio">Android Studio</a></p>
</li>
<li>
<p>Android device or emulator running API level 22 or above</p>
</li>
<li>
<p>Android SDK 29</p>
</li>
<li>
<p>Android Build Tools 29</p>
</li>
<li>
<p><a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">JDK 8</a></p>
</li>
<li>
<p>git (Optional)<br>
This is required if you would prefer to pull the source code from GitHub repo.</p>
<div class="ulist">
<ul>
<li>
<p>Create a example$https://github.com[free github account] if you don&#8217;t already have one</p>
</li>
<li>
<p>git can be downloaded from <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">git-scm.org</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="app-overview"><a class="anchor" href="#app-overview"></a>App Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this tutorial you will be working with an app that allows users to log in and make changes to their user profile information.</p>
</div>
<div class="paragraph">
<p>User profile information is persisted as a <code>Document</code> in the local Couchbase Lite <code>Database</code>.
When the user logs out and logs back in again, the profile information is loaded from the <code>Database</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/user_profile.gif" alt="User Profile App Demo" width="400">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="app-installation"><a class="anchor" href="#app-installation"></a>App Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Clone the <strong><em>standalone</em></strong> branch of the <code>User Profile Demo</code> repository from GitHub. Assuming that you have
<a href="https://git-scm.com/downloads">Git</a>
installed you can use the following command to clone the solution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">git clone -b standalone https://github.com/couchbaselabs/userprofile-couchbase-mobile-android.git</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="installing-couchbase-lite-framework"><a class="anchor" href="#installing-couchbase-lite-framework"></a>Installing Couchbase Lite Framework</h3>
<div class="paragraph">
<p>This
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src">sample project</a> already contains the appropriate additions for downloading, and utilizing the Android Couchbase Lite dependency module.
However, in the future, to include Couchbase Lite support within an Android app add the the following within
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/app/build.gradle">app/build.gradle</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">dependencies {
    implementation 'com.couchbase.lite:couchbase-lite-android-ee:3.0.0'
}</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Try it out</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/build.gradle">build.gradle</a> using Android Studio.</p>
</li>
<li>
<p>Build and run the project.</p>
</li>
<li>
<p>Verify that you see the login screen.</p>
<div class="imageblock">
<div class="content">
<img src="_images/user_profile_login.png" alt="User Profile Login Screen Image" width="400">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sample-app-architecture"><a class="anchor" href="#sample-app-architecture"></a>Sample App Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The sample app follows the
<a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter">MVP pattern</a>,
separating the internal data model, from a passive view through a presenter that handles the logic of our application and acts as the conduit between the model and the view.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/mvp_architecture.png" alt="MVP Architecture">
</div>
</div>
<div class="paragraph">
<p>In the Android Studio project, the code is structured by feature. You can select the Android option in the left navigator to view the files by package.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/mvp_as.png" alt="MVP Android Studio" width="400">
</div>
</div>
<div class="paragraph">
<p>Each package contains 3 different files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Activity</strong>: This is where all the view logic resides.</p>
</li>
<li>
<p><strong>Presenter</strong>: This is where all the business logic resides to fetch and persist data to a web service or the embedded Couchbase Lite database.</p>
</li>
<li>
<p><strong>Contract</strong>: An interface that the <code>Presenter</code> and <code>Activity</code> implement.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/mvp_package.png" alt="MVP Package">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-model"><a class="anchor" href="#data-model"></a>Data Model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Lite is a JSON Document Store.
A <code>Document</code> is a logical collection of named fields and values.
The values are any valid JSON types. In addition to the standard JSON types, Couchbase Lite supports <code>Date</code> and <code>Blob</code> data types.
While it is not required or enforced, it is a recommended practice to include a <em>"type"</em> property that can serve as a namespace for related documents.</p>
</div>
<div class="sect2">
<h3 id="the-user-profile-document"><a class="anchor" href="#the-user-profile-document"></a>The "User Profile" Document</h3>
<div class="paragraph">
<p>The sample app deals with a single <code>Document</code> with a <em>"type"</em> property of <em>"user"</em>.
The document ID is of the form <em>"user::&lt;email&gt;"</em>.</p>
</div>
<div class="paragraph">
<p>An example of a document would be</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "type":"user",
    "name":"Jane Doe",
    "email":"jane.doe@earth.org",
    "address":"101 Main Street",
    "image":CBLBlob (image/jpg) <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Special
<a href="https://docs.couchbase.com/couchbase-lite/current/java.html#blobs"><code>Blob</code></a> data type that is associated with the profile image.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="userprofile"><a class="anchor" href="#userprofile"></a>UserProfile</h3>
<div class="paragraph">
<p>For the purpose of this tutorial the <em>"user"</em> <code>Document</code> is first stored within an <code>Object</code> of type <code>Map&lt;String, Object&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/profile/UserProfileActivity.java">Map&lt;String, Object&gt; profile = new HashMap&lt;&gt;();
profile.put("name", nameInput.getText().toString());
profile.put("email", emailInput.getText().toString());
profile.put("address", addressInput.getText().toString());

byte[] imageViewBytes = getImageViewBytes();

if (imageViewBytes != null) {
    profile.put("imageData", new com.couchbase.lite.Blob("image/jpeg", imageViewBytes));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Map&lt;String, Object&gt;</code> object functions are used as a data storage mechanism between the app&#8217;s UI and the backing functionality of the Couchbase Lite <code>Document</code> object.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="basic-database-operations"><a class="anchor" href="#basic-database-operations"></a>Basic Database Operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we will do a code walk-through of the basic Database operations.</p>
</div>
<div class="sect2">
<h3 id="initialize-couchbase-lite"><a class="anchor" href="#initialize-couchbase-lite"></a>initialize Couchbase Lite</h3>
<div class="paragraph">
<p>Before you can start using Couchbase Lite on Android, you would have to initialize it, with an appropriate Android Application Context.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java"><strong>DatabaseManager.java</strong></a> file and locate the <code>initCouchbaseLite</code> method.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java">public void initCouchbaseLite(Context context) {
    CouchbaseLite.init(context);
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="create-and-open-a-database"><a class="anchor" href="#create-and-open-a-database"></a>Create and Open a Database</h3>
<div class="paragraph">
<p>When a user logs in, we create an empty Couchbase Lite database for the user if one does not exist.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java"><strong>DatabaseManager.java</strong></a> file and locate the <code>openOrCreateDatabaseForUser</code> method.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java">public void openOrCreateDatabaseForUser(Context context, String username)</code></pre>
</div>
</div>
</li>
<li>
<p>We create an instance of the <code>DatabaseConfiguration</code> within
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java"><strong>DatabaseManager.java</strong></a> via an <code>abstract</code> requirement from the parent class, <code>BaseRepository</code>.
This is an optional step. In our case, we would like to override the default path of the database.
Every user has their own instance of the <code>Database</code> that is located in a folder corresponding to the user.
Please note that the default path is platform specific.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">DatabaseConfiguration config = new DatabaseConfiguration();
config.setDirectory(String.format("%s/%s", context.getFilesDir(), username));</code></pre>
</div>
</div>
</li>
<li>
<p>Then we create a local Couchbase Lite database named <strong><em>"userprofiles"</em></strong> for the user.
If a database already exists for the user, the existing version is returned.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java">database = new Database(dbName, config);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="listening-to-database-changes"><a class="anchor" href="#listening-to-database-changes"></a>Listening to Database Changes</h3>
<div class="paragraph">
<p>You can be asynchronously notified of any change (add, delete, update) to the Database by registering a change listener with the Database.
In our app, we are not doing anything special with the Database change notification other than logging the change.
In a real world app, you would use this notification for instance, to update the UI.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java"><strong>DatabaseManager.java</strong></a> file and locate the <code>registerForDatabaseChanges()</code> function.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">+
----
[data-source-url=https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java]
private void registerForDatabaseChanges()
----</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>We register a change listener with the database. This is an optional step. We track the <code>ListenerToken</code> as it is needed for removing the listener.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java">// Add database change listener
listenerToken = database.addChangeListener(new DatabaseChangeListener() {
    @Override
    public void changed(final DatabaseChange change) {
        if (change != null) {
            for(String docId : change.getDocumentIDs()) {
                Document doc = database.getDocument(docId);
                if (doc != null) {
                    Log.i("DatabaseChangeEvent", "Document was added/updated");
                }
                else {

                    Log.i("DatabaseChangeEvent","Document was deleted");
                }
            }
        }
    }
});</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="close-a-database"><a class="anchor" href="#close-a-database"></a>Close a Database</h3>
<div class="paragraph">
<p>When a user logs out, we close the Couchbase Lite Database associated with the user and deregister any database change listeners</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java"><strong>DatabaseManager.java</strong></a> file and locate the <code>closeDatabaseForCurrentUser()</code> function.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java">public void closeDatabaseForUser()</code></pre>
</div>
</div>
</li>
<li>
<p>Closing the database is pretty straightforward</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java">database.close();</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="de-registering-from-database-changes"><a class="anchor" href="#de-registering-from-database-changes"></a>De-registering from Database Changes</h3>
<div class="ulist">
<ul>
<li>
<p>Open the
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java"><strong>DatabaseManager.java</strong></a> file and locate the <code>deregisterForDatabaseChanges()</code> function.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java">private void deregisterForDatabaseChanges()</code></pre>
</div>
</div>
</li>
<li>
<p>We stop listening to database changes by passing in the <code>ListenerToken</code> associated with the listener.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java">database.removeChangeListener(listenerToken);</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Try it out</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The app can be tested using a simulator/emulator or device.</p>
</li>
<li>
<p>Log into the app with any username and password.<br>
Let&#8217;s use the values <em>"demo@example.com"</em> and <em>"password"</em> for username and password fields respectively.</p>
<div class="paragraph">
<p>If this is the first time that the user is signing in, a new Couchbase Lite database will be created. If not, the user&#8217;s existing database will be opened.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="document-operations"><a class="anchor" href="#document-operations"></a>Document Operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once an instance of the Couchbase Lite database is created/opened for the specific user, we can perform basic <code>Document</code> functions on the database.
In this section, we will walk-through the code that describes basic <code>Document</code> operations</p>
</div>
<div class="sect2">
<h3 id="reading-a-document"><a class="anchor" href="#reading-a-document"></a>Reading a Document</h3>
<div class="paragraph">
<p>Once the user logs in, the user is taken to the "Your Profile" screen. A request is made to load  <a href="#the-user-profile-document">The "User Profile" Document</a>  for the user. When the user logs in the very first time, there would be no <em>user profile</em> document for the user.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java"><strong>DatabaseManager.java</strong></a> file and locate the <code>getCurrentUserDocId</code> method. This document Id is constructed by prefixing the term "user::" to the email Id of the user.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/util/DatabaseManager.java">public String getCurrentUserDocId() {
    return "user::" + currentUser;
}</code></pre>
</div>
</div>
</li>
<li>
<p>Next, in the
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/app/src/main/java/com/couchbase/userprofile/profile/UserProfilePresenter.java"><strong>UserProfilePresenter.java</strong></a> file, locate the <code>fetchProfile</code> method.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/profile/UserProfilePresenter.java">public void fetchProfile()</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note</strong>: The <code>fetchProfile</code> method is required by
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/app/src/main/java/com/couchbase/userprofile/profile/UserProfileContract.java"><strong>UserProfileContract.java</strong></a>, playing a key role in the MVP architecture previously mentioned.</p>
</div>
</li>
<li>
<p>We try to fetch the <code>Document</code> with specified <code>userProfileDocId</code> from the database.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/profile/UserProfilePresenter.java">String docId = DatabaseManager.getSharedInstance().getCurrentUserDocId();

if (database != null) {

    Map&lt;String, Object&gt; profile = new HashMap&lt;&gt;(); <i class="conum" data-value="1"></i><b>(1)</b>

    profile.put("email", DatabaseManager.getSharedInstance().currentUser); <i class="conum" data-value="2"></i><b>(2)</b>

    Document document = database.getDocument(docId); <i class="conum" data-value="3"></i><b>(3)</b>

    if (document != null) {
        profile.put("name", document.getString("name")); <i class="conum" data-value="4"></i><b>(4)</b>
        profile.put("address", document.getString("address")); <i class="conum" data-value="4"></i><b>(4)</b>
        profile.put("imageData", document.getBlob("imageData")); <i class="conum" data-value="4"></i><b>(4)</b>
    }

    mUserProfileView.showProfile(profile); <i class="conum" data-value="5"></i><b>(5)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create an instance of the <a href="#userprofile">UserProfile</a> via <code>Map&lt;String,Object&gt;</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Set the <code>email</code> property of the UserProfile with the email Id of the logged in user. This value is not editable.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Fetch an <strong>immutable</strong> copy of the Document from the Database</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>If the document exists and is fetched succesfully, we use appropriate type-getters to fetch the various members of the Document based on the property name. Specifically, note the support of the <code>getBlob</code> type to fetch the value of a property of type <code>Blob</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Using the newly constructed <a href="#userprofile">UserProfile</a> update the UI via the <code>showProfile</code> method (required by the interface
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/app/src/main/java/com/couchbase/userprofile/profile/UserProfileContract.java"><strong>UserProfileContract</strong></a> which is implemented by
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/app/src/main/java/com/couchbase/userprofile/profile/UserProfileActivity.java"><strong>UserProfileActivity</strong></a>).</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="creating-updating-a-document"><a class="anchor" href="#creating-updating-a-document"></a>Creating / Updating a Document</h3>
<div class="paragraph">
<p>A &lt;&lt;"User Profile" Document&gt;&gt; is created for the user when they tap the "Save" button on the "Profile Screen".
The method below applies whether you are creating a document or updating an existing version.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the
<a href="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/tree/standalone/modules/userprofile/examples/src/app/src/main/java/com/couchbase/userprofile/profile/UserProfilePresenter.java"><strong>UserProfilePresenter.java</strong></a> file and locate the <code>saveProfile</code> method.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/profile/UserProfilePresenter.java">public void saveProfile(Map&lt;String,Object&gt; profile)</code></pre>
</div>
</div>
</li>
<li>
<p>We create a <strong>mutable</strong> instance of the Document.
By default, all APIs in Couchbase Lite deal with immutable objects, thereby making them <strong>thread-safe</strong> by design.
In order to mutate an object, you must explicitly get a mutable copy of the object.
Use appropriate type-setters to set the various properties of the Document.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/profile/UserProfilePresenter.java">MutableDocument mutableDocument = new MutableDocument(docId, profile);</code></pre>
</div>
</div>
</li>
<li>
<p>Save the document.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java" data-source-url="https://github.com/couchbaselabs/userprofile-couchbase-mobile-android/blob/a75034ed2275eca31380329362f6b2613ecb3876/content/modules/userprofile-standalone-android/examples/src/app/src/main/java/com/couchbase/userprofile/profile/UserProfilePresenter.java">database.save(mutableDocument);</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="deleting-a-document"><a class="anchor" href="#deleting-a-document"></a>Deleting a Document</h3>
<div class="paragraph">
<p>We don&#8217;t delete a <code>Document</code> in this sample app.
However, deletion of a document is pretty straightforward and this is how you would do it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">var document = database.getDocument(id);

if (document != null) {
    database.delete(document);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="try-it-out"><a class="anchor" href="#try-it-out"></a>Try It Out</h3>
<div class="ulist">
<ul>
<li>
<p>You should have followed the steps discussed in the "Try It Out" section under <a href="#create-and-open-a-database">Create and Open a Database</a>.</p>
</li>
<li>
<p>Enter a "name" for the user in the Text Entry box and Tap "Save".</p>
</li>
<li>
<p>Confirm that you see a "Successfully Updated Profile" toast message. The first time you update the profile screen, the <code>Document</code> will be created.</p>
<div class="imageblock">
<div class="content">
<img src="_images/doc_create.png" alt="User Profile Document Creation">
</div>
</div>
</li>
<li>
<p>Now tap on the "Upload Photo" button and select an image from the Photo Album.</p>
<div class="imageblock">
<div class="content">
<img src="_images/image_selection.gif" alt="100" width="400">
</div>
</div>
</li>
<li>
<p>Tap "Save"</p>
</li>
<li>
<p>Confirm that you see the <em>toast</em> message "Successfully Updated Profile".
The <code>Document</code> will be updated this time.</p>
</li>
<li>
<p>Tap "Log Out" and log out of the app</p>
</li>
<li>
<p>Log back into the app with the same user credentials you used earlier.
In my example, I used <em>"demo@example.com"</em> and <em>"password"</em>.</p>
</li>
<li>
<p>Confirm that you see the profile screen  with the <em>name</em> and <em>image</em> values that you set earlier.</p>
<div class="imageblock">
<div class="content">
<img src="_images/log_off_on.gif" alt="200" width="400">
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="learn-more"><a class="anchor" href="#learn-more"></a>Learn More</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Congratulations on completing this tutorial!</p>
</div>
<div class="paragraph">
<p>This tutorial walked you through a very basic example of how to get up and running with Couchbase Lite as a local-only, standalone embedded data store in your Android app.
If you want to learn more about Couchbase Mobile, check out the following links.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Further Reading</div>
<div class="paragraph">
<p>*
<a href="https://www.couchbase.com/products/mobile">Introduction to Couchbase Mobile</a>
*
<a href="https://blog.couchbase.com/couchbase-mobile-2-0/">Couchbase Mobile 2.0 Overview</a>
*
<a href="https://docs.couchbase.com/couchbase-lite/current/introduction.html">Couchbase Lite Reference Guide</a>
*
<a href="https://blog.couchbase.com/category/couchbase-mobile/">Couchbase Mobile Blogs</a></p>
</div>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span> 2022 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../_/js/site.js"></script>
<script defer src="../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
</body>
</html>
