<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>User Profile Sample: Couchbase Lite Query | Couchbase Docs</title>
<link rel="canonical" href="http://127.0.0.1:5000/userprofile-couchbase-mobile/query/userprofile/userprofile_query.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="userprofile-couchbase-mobile">
<meta name="dcterms.identifier" content="query">
<meta name="page-url" content="/userprofile-couchbase-mobile/query/userprofile/userprofile_query.html">
<meta name="generator" content="Antora 3.0.0-alpha.5">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="http://127.0.0.1:5000/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="http://127.0.0.1:5000/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile Local
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/cloud.html">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../tutorials/index.html">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a href="https://cloud.couchbase.com/sign-up" class="free-trial-link" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  <i class="fas fa-cloud"></i>
                  Free Trial
                </a>
                <a class="btn btn-primary try-btn"  onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
<div class="components">
  <div class="components_group-title">
    General
  </div>
  <ul class="components_list">
    <li class="components_list-items">
      <div class="component_list-version">
        <span class="component_list_title">Couchbase Mobile</span>
        <select class="version_list" data-component="shared-mobile">
          <option value="3.0" data-url="../../../shared-mobile/current/cbmintro.html" selected>3.0 BETA</option>
        </select>
      </div>
      <div class="version_items hide" data-version="3.0">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text"><em>Couchbase&#160;Mobile</em></span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../shared-mobile/current/cbmintro.html">About Mobile</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../couchbase-lite/current/index.html"><em>Couchbase&#160;Lite</em></a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <span class="menu_title menu_text">{sgw&#8212;&#8203;xref}:index.adoc[{sgw-e}]</span>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
    </li>
    <li class="components_list-items">
      <div class="component_list-version">
        <span class="component_list_title">sdk</span>
        <select class="version_list" data-component="sdk">
          <option value="6.6" data-url="../../../sdk/current/index.html" selected>6.6</option>
        </select>
      </div>
      <div class="version_items hide" data-version="6.6">
      </div>
    </li>
    <li class="components_list-items">
      <div class="component_list-version">
        <span class="component_list_title">User Profile Tutorial</span>
        <select class="version_list" data-component="userprofile-couchbase-mobile">
          <option value="sync" data-url="../../current/index.html">Sync</option>
          <option value="standalone" data-url="../../standalone/index.html">Standalone</option>
          <option value="query" data-url="../index.html" selected>Query</option>
          <option value="backgroundfetch" data-url="../../backgroundfetch/index.html">backgroundfetch</option>
        </select>
      </div>
      <div class="version_items hide" data-version="sync">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on iOS</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../standalone/userprofile/userprofile_basic.html">Standalone</a>
  </span>
</li>
<li class="menu_list is-current-page" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link is-current-page" href="userprofile_query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../current/userprofile/userprofile_sync.html">Sync</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on Xamarin</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#standalone@userprofile-couchbase-mobile:userprofile:xamarin/userprofile_basic.adoc">Standalone</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#query@userprofile-couchbase-mobile:userprofile:xamarin/userprofile_query.adoc">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#sync@userprofile-couchbase-mobile:userprofile:xamarin/userprofile_sync.adoc">Sync</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on Android</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#standalone@userprofile-couchbase-mobile:userprofile:android/userprofile_basic.adoc">Standalone</a>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
      <div class="version_items hide" data-version="standalone">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on iOS</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../standalone/userprofile/userprofile_basic.html">Standalone</a>
  </span>
</li>
<li class="menu_list is-current-page" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link is-current-page" href="userprofile_query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../current/userprofile/userprofile_sync.html">Sync</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on Xamarin</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#standalone@userprofile-couchbase-mobile:userprofile:xamarin/userprofile_basic.adoc">Standalone</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#query@userprofile-couchbase-mobile:userprofile:xamarin/userprofile_query.adoc">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#sync@userprofile-couchbase-mobile:userprofile:xamarin/userprofile_sync.adoc">Sync</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on Android</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#standalone@userprofile-couchbase-mobile:userprofile:android/userprofile_basic.adoc">Standalone</a>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
      <div class="version_items hide" data-version="query">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on iOS</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../standalone/userprofile/userprofile_basic.html">Standalone</a>
  </span>
</li>
<li class="menu_list is-current-page" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link is-current-page" href="userprofile_query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../current/userprofile/userprofile_sync.html">Sync</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../backgroundfetch/userprofile/background-fetch.html">Background Fetch</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on Xamarin</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#standalone@userprofile-couchbase-mobile:userprofile:xamarin/userprofile_basic.adoc">Standalone</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#query@userprofile-couchbase-mobile:userprofile:xamarin/userprofile_query.adoc">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#sync@userprofile-couchbase-mobile:userprofile:xamarin/userprofile_sync.adoc">Sync</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on Android</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#standalone@userprofile-couchbase-mobile:userprofile:android/userprofile_basic.adoc">Standalone</a>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
      <div class="version_items hide" data-version="backgroundfetch">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on iOS</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../standalone/userprofile/userprofile_basic.html">Standalone</a>
  </span>
</li>
<li class="menu_list is-current-page" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link is-current-page" href="userprofile_query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../current/userprofile/userprofile_sync.html">Sync</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../backgroundfetch/userprofile/background-fetch.html">Background Fetch</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on Xamarin</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#standalone@userprofile-couchbase-mobile:userprofile:xamarin/userprofile_basic.adoc">Standalone</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#query@userprofile-couchbase-mobile:userprofile:xamarin/userprofile_query.adoc">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#sync@userprofile-couchbase-mobile:userprofile:xamarin/userprofile_sync.adoc">Sync</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started on Android</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#standalone@userprofile-couchbase-mobile:userprofile:android/userprofile_basic.adoc">Standalone</a>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
    </li>
  </ul>
</div>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="https://github.com/ibsoln/userprofile-couchbase-mobile/edit/DOC-9382-query/content/modules/userprofile/pages/userprofile_query.adoc" title="Edit Page" target="_blank" rel="noopener">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">User Profile Tutorial</a></li>
<li class="crumb">Getting Started on iOS</li>
<li class="crumb"><a href="userprofile_query.html">Query</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">User Profile Sample: Couchbase Lite Query</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<!-- toc disabled -->
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Lite brings powerful querying and Full-Text-Search(FTS) capabilities to the edge.
The new query interface is based on <a href="https://www.couchbase.com/products/n1ql">N1QL</a>, Couchbaseâ€™s declarative query language that extends <a href="https://www.sqlite.org/index.html">SQL</a> for JSON.
If you are familiar with SQL, you will feel right at home with the semantics of the new API.
The query API is designed using the <a href="https://en.wikipedia.org/wiki/Fluent_interface">Fluent API Design Pattern</a>, and it uses method cascading to read to like a Domain Specific Language (DSL).
This makes the interface very intuitive and easy to understand.</p>
</div>
<div class="paragraph">
<p>Couchbase Lite can be used as a standalone embedded database within your mobile app.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">What You Will Learn</div>
<div class="paragraph">
<p>This tutorial will walk through a simple swift app that will</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Demonstrate how you can bundle, load and use a  <strong><em>prebuilt</em></strong> instance of Couchbase Lite</p>
</li>
<li>
<p>Introduce you to the basics of the <code>QueryBuilder</code> interface</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>You can learn more about Couchbase Mobile <a href="https://developer.couchbase.com/mobile">here</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial assumes familiarity with building Swift apps with Xcode and with Couchbase Lite.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you are unfamiliar with the basics of Couchbase Lite, it is recommended that you walk through the tutorial <em>Fundamentals of using Couchbase Lite as a <a href="../../standalone/userprofile/userprofile_basic.html" class="page">Standalone</a> database</em></p>
</li>
<li>
<p>iOS (Xcode)<br>
Download the latest version from the <a href="https://itunes.apple.com/us/app/xcode/id497799835?mt=12" target="_blank" rel="noopener">Mac App Store</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are on an older version of Xcode, which you need to retain for other development needs, make a copy of your existing version of Xcode and install the latest Xcode version.
That way you can have multiple versions of Xcode on your Mac.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>git (Optional)<br>
This is required if you would prefer to pull the source code from GitHub repo.</p>
<div class="ulist">
<ul>
<li>
<p>Create a <a href="https://github.com" target="_blank" rel="noopener">free github account</a> if you don&#8217;t already have one</p>
</li>
<li>
<p>git can be downloaded from <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" target="_blank" rel="noopener">git-scm.org</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="app-overview"><a class="anchor" href="#app-overview"></a>App Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will be working with a very simple <em>User Profile</em> app.
If you have walked through the <a href="../../standalone/userprofile/userprofile_basic.html" class="page">Standalone</a> tutorial, you will recognize that this version extends the functionality introduced in the app introduced in that tutorial.</p>
</div>
<div class="paragraph">
<p>This app does the following</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Allows users to log in and create or update his/her user profile information.
Just as you could in the <a href="../../standalone/userprofile/userprofile_basic.html" class="page">Standalone</a> tutorial.</p>
</li>
<li>
<p>Includes a second record type.
As part of profile information, users can now select a "university" from a list of possible options.</p>
<div class="paragraph">
<p>The list of matching universities is found by quering (using the new Query API) a local <em>prebuilt</em> "University"  Database, which is bundled in the app.</p>
</div>
</li>
<li>
<p>The user profile information is persisted as a Document in the local Couchbase Lite Database.
So subsquently, when the user logs out and logs back in again, the profile information is loaded from the Database.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/university_app_overview.gif" alt="The sample user profile application running in a simulator">
</div>
<div class="title">Figure 1. The sample user profile application running in a simulator</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation"><a class="anchor" href="#installation"></a>Installation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="fetching-app-source-code"><a class="anchor" href="#fetching-app-source-code"></a>Fetching App Source Code</h3>
<div class="paragraph">
<p>Clone the <strong><em>query</em></strong> branch of the <code>User Profile Demo</code> project from GitHub.
Type the following command in your terminal</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git clone -b query https://github.com/couchbaselabs/userprofile-couchbase-mobile.git</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="installing-couchbase-lite-framework"><a class="anchor" href="#installing-couchbase-lite-framework"></a>Installing Couchbase Lite Framework</h3>
<div class="paragraph">
<p>Next, we will download the Couchbase Lite 3.0.0 framework.</p>
</div>
<div class="paragraph">
<p>The Couchbase Lite iOS framework is distributed via SPM, CocoaPods, Carthage or you can download the pre-built framework&#8201;&#8212;&#8201;see the <a href="../../../couchbase-lite/current/swift/gs-install.html" class="page">Get Started - Install</a> documentation for more information.</p>
</div>
<div class="paragraph">
<p>In our example, we will download the pre-built version of the frameworks.
To do this, type the following in a command terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd /path/to/UserProfileDemo/content/modules/userprofile/examples

sh install_tutorial.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, let&#8217;s verify the installation.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Try it Out</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the <code>UserProfileDemo.xcodeproj</code>.
The project would be located at <code>/path/to/UserProfileDemo/content/modules/userprofile/examples</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">open UserProfileDemo.xcodeproj</code></pre>
</div>
</div>
</li>
<li>
<p>Build and run the project using the <em>simulator</em> in Xcode.<br>
While you can run the app on a real device, we recommend the Simulator so you can see the debug logs in the output console.</p>
</li>
<li>
<p>Verify that you see the login screen</p>
</li>
</ol>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/user_profile_login.png" alt="User Profile Login Screen Image">
</div>
<div class="title">Figure 2. User Profile Login Screen Image</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-model"><a class="anchor" href="#data-model"></a>Data Model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Lite is a JSON Document Store.
A Document is a logical collection of named fields and values.
The values are any valid JSON types.</p>
</div>
<div class="paragraph">
<p>In addition to the standard JSON types, Couchbase Lite supports some special types like <code>Date</code> and <code>Blob</code>.
While it is not required or enforced, it is a recommended practice to include a <em>"type"</em> property that can serve as a namespace for related documents.</p>
</div>
<div class="paragraph">
<p>The app deals with two Document types: <em>User Profile</em> and <em>University</em>.</p>
</div>
<div class="sect2">
<h3 id="the-user-profile-document"><a class="anchor" href="#the-user-profile-document"></a>The User Profile Document</h3>
<div class="paragraph">
<p>The <em>User Profile</em> Document has a <code>type</code> property of <em>user</em> as shown in  <a href="#ex-user-profile-doc">Example 1</a>.
Its document ID is of the form <em>"user::demo@example.com"</em>.</p>
</div>
<div id="ex-user-profile-doc" class="exampleblock">
<div class="title">Example 1. A user profile document</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "type":"user",
    "name":"Jane Doe",
    "email":"jame.doe@earth.org",
    "address":"101 Main Street",
    "image":CBLBlob (image/jpg),
    "university":"Rensselaer Polytechnic"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="the-user-record"><a class="anchor" href="#the-user-record"></a>The User Record</h4>
<div class="paragraph">
<p>The <em>"user"</em> Document is encoded to a native struct named <em>UserRecord</em> as shown in <a href="#ex-user-rec">Example 2</a></p>
</div>
<div id="ex-user-rec" class="exampleblock">
<div class="title">Example 2. The encoding of a UserRecord to a native structure</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre data-source-url="https://github.com/ibsoln/userprofile-couchbase-mobile/blob/e33c1473d0bf0f738d3c39640302a46202256135/content/modules/userprofile/examples/UserProfileDemo/model/UserRecord.swift">let kUserRecordDocumentType = "user"
typealias ExtendedData = [[String:Any]]
struct UserRecord : CustomStringConvertible{
    let type = kUserRecordDocumentType
    var name:String?
    var email:String?
    var address:String?
    var imageData:Data?
    var university:String?
    var extended:ExtendedData? // future
  
    var description: String {
        return "name = \(String(describing: name)), email = \(String(describing: email)), address = \(String(describing: address)), imageData = \(imageData)"
    }
    

}</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-university-document"><a class="anchor" href="#the-university-document"></a>The University Document</h3>
<div class="paragraph">
<p>The app comes bundled with a collection of Documents of type <em>"university"</em>.
Each Document represents a university&#8201;&#8212;&#8201;see <a href="#ex-university-doc">Example 3</a></p>
</div>
<div id="ex-university-doc" class="exampleblock">
<div class="title">Example 3. A university document</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "type":"university","web_pages": [
      "http://www.rpi.edu/"
    ],
    "name": "Rensselaer Polytechnic Institute",
    "alpha_two_code": "US",
    "state-province": null,
    "domains": [
      "rpi.edu"
    ],
    "country": "United States"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="universityrecord"><a class="anchor" href="#universityrecord"></a>UniversityRecord</h4>
<div class="paragraph">
<p>The <em>"university"</em> Document is encoded to a native struct named <em>UniversityRecord</em>&#8201;&#8212;&#8201;as shown in <a href="#ex-university-rec">Example 4</a></p>
</div>
<div id="ex-university-rec" class="exampleblock">
<div class="title">Example 4. The encoding of a UniversityRecord to a native structure</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift" data-source-url="https://github.com/ibsoln/userprofile-couchbase-mobile/blob/e33c1473d0bf0f738d3c39640302a46202256135/content/modules/userprofile/examples/UserProfileDemo/model/UniversityRecord.swift">typealias Universities = [UniversityRecord]
// Native object
struct UniversityRecord : CustomStringConvertible{
    
    var alphaTwoCode:String?
    var country:String?
    var domains:[String]?
    var name:String?
    var webPages:[String]?
    
    var description: String {
        return "name = \(String(describing: name)), country = \(String(describing: country)), domains = \(String(describing: domains)), webPages = \(webPages), alphaTwoCode = \(String(describing: alphaTwoCode)) "
    }
    
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-a-prebuilt-database"><a class="anchor" href="#using-a-prebuilt-database"></a>Using a Prebuilt Database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are several reasons why you may want to bundle your app with a prebuilt database.
This would be suited for data that does not change or change that often, so you can avoid the bandwidth and latency involved in fetching/syncing this data from a remote server.
This also improves the overall user experience by reducing the start-up time.</p>
</div>
<div class="paragraph">
<p>In our app, the instance of Couchbase Lite that holds the pre-loaded <em>"university"</em> data is separate from the Couchbase Lite instance that holds <em>"user"</em> data hold the pre-loaded data.
A separate Couchbase Lite instance is not required.
However, in our case, since there can be many users potentially using the app on a given device, it makes more sense to keep it separate.
This is to avoid duplication of pre-loaded data for every user.</p>
</div>
<div class="sect2">
<h3 id="location-of-the-cblite-file"><a class="anchor" href="#location-of-the-cblite-file"></a>Location of the cblite file</h3>
<div class="paragraph">
<p>The pre-built database will be in the form of a <code>cblite</code> file.
It should be be in your app project bundle.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <code>UserProfileDemo.xcodeproj</code> project explorer, locate the <code>universities.cblite2</code> file</p>
<div class="imageblock">
<div class="content">
<img src="_images/cblite_location.png" alt="Prebuilt Database Location">
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="loading-the-prebuilt-database"><a class="anchor" href="#loading-the-prebuilt-database"></a>Loading the Prebuilt Database</h3>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>DatabaseManager.swift</strong> file and locate the <code>openPrebuiltDatabase()</code> function.
The prebuilt database is common to all users of the app (on the device).
So it will be loaded once and shared by all users on the device.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift" data-source-url="https://github.com/ibsoln/userprofile-couchbase-mobile/blob/e33c1473d0bf0f738d3c39640302a46202256135/content/modules/userprofile/examples/UserProfileDemo/model/DatabaseManager.swift">func openPrebuiltDatabase(handler:(_ error:Error?)-&gt;Void) {</code></pre>
</div>
</div>
</li>
<li>
<p>First, we create an instance of <code>DatabaseConfiguration</code> object and specify the path where the database would be located</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift" data-source-url="https://github.com/ibsoln/userprofile-couchbase-mobile/blob/e33c1473d0bf0f738d3c39640302a46202256135/content/modules/userprofile/examples/UserProfileDemo/model/DatabaseManager.swift">var options = DatabaseConfiguration()
guard let universityFolderUrl = _applicationSupportDirectory else {
    fatalError("Could not open Application Support Directory for app!")
    return
}
let universityFolderPath = universityFolderUrl.path
let fileManager = FileManager.default
if !fileManager.fileExists(atPath: universityFolderPath) {
    try fileManager.createDirectory(atPath: universityFolderPath,
                                    withIntermediateDirectories: true,
                                    attributes: nil)
    
}
// Set the folder path for the CBLite DB
options.directory = universityFolderPath</code></pre>
</div>
</div>
</li>
<li>
<p>Then we determine if the "universities" database already exists at the specified location.
It would not be present if this is the first time we are using the app, in which case, we locate the <em>"universities.cblite"</em> resource in the App&#8217;s main bundle and we copy it over to the Database folder.</p>
<div class="paragraph">
<p>If the database is already present at the specified Database location, we simply open the database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift" data-source-url="https://github.com/ibsoln/userprofile-couchbase-mobile/blob/e33c1473d0bf0f738d3c39640302a46202256135/content/modules/userprofile/examples/UserProfileDemo/model/DatabaseManager.swift">// Load the prebuilt "universities" database if it does not exist as the specified folder
if Database.exists(withName: kUniversityDBName, inDirectory: universityFolderPath) == false {
    // Load prebuilt database from App Bundle and copy over to Applications support path
    if let prebuiltPath = Bundle.main.path(forResource: kUniversityDBName, ofType: "cblite2") {
        try Database.copy(fromPath: prebuiltPath, toDatabase: "\(kUniversityDBName)", withConfig: options)
        
    }
    // Get handle to DB  specified path
    _universitydb = try Database(name: kUniversityDBName, config: options)
    
    // Create indexes to facilitate queries
    try createUniversityDatabaseIndexes()
    
}
else
{
    // Gets handle to existing DB at specified path
    _universitydb = try Database(name: kUniversityDBName, config: options)
    
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="indexing-the-prebuilt-database"><a class="anchor" href="#indexing-the-prebuilt-database"></a>Indexing the Prebuilt Database</h3>
<div class="ulist">
<ul>
<li>
<p>Creating indexes for non-FTS based queries is optional.
However, in order to speed up queries, you can create indexes on the properties that you would query against.
Indexing is handled eagerly.</p>
</li>
<li>
<p>In the <strong>DatabaseManager.swift</strong> file, locate the <code>createUniversityDatabaseIndexes()</code> function.
We create an index on the <code>name</code> and <code>location</code> properties of the documents in the <em>university</em> database.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift" data-source-url="https://github.com/ibsoln/userprofile-couchbase-mobile/blob/e33c1473d0bf0f738d3c39640302a46202256135/content/modules/userprofile/examples/UserProfileDemo/model/DatabaseManager.swift">fileprivate func createUniversityDatabaseIndexes()throws {
    // For searches on type property
    try _universitydb?.createIndex(IndexBuilder.valueIndex(items:  ValueIndexItem.expression(Expression.property("name")),ValueIndexItem.expression(Expression.property("location"))), withName: "NameLocationIndex")
 
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="closing-the-database"><a class="anchor" href="#closing-the-database"></a>Closing the Database</h3>
<div class="paragraph">
<p>When a user logs out, we close the Prebuilt Database along with other user-specific databases</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>DatabaseManager.swift</strong> file, locate the <code>closePrebuiltDatabase()</code> function.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift" data-source-url="https://github.com/ibsoln/userprofile-couchbase-mobile/blob/e33c1473d0bf0f738d3c39640302a46202256135/content/modules/userprofile/examples/UserProfileDemo/model/DatabaseManager.swift">func closePrebuiltDatabase() -&gt; Bool {</code></pre>
</div>
</div>
</li>
<li>
<p>Closing the database is pretty straightforward</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift" data-source-url="https://github.com/ibsoln/userprofile-couchbase-mobile/blob/e33c1473d0bf0f738d3c39640302a46202256135/content/modules/userprofile/examples/UserProfileDemo/model/DatabaseManager.swift">try db.close()
try universitydb.close()</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Try Out the App</div>
<div class="paragraph">
<p>The app should be running in the simulator.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log into the app with any email Id and password.
Let&#8217;s use the values <em>"<a href="mailto:demo@example.com">demo@example.com</a>"</em> and <em>"password"</em> for user Id and password fields respectively.
If this is the first time that <em>any</em> user is signing in to the app, the pre-built database will be loaded from the App Bundle.
In addition, new user-specific Database will be created / opened.</p>
</li>
<li>
<p>Confirm that the console log output has a message similar to the one shown in <a href="#ex-sample-output">Example 5</a>.
This output also indicates the location of the Prebuilt database as well as the Database for the user.
This would be within the <em>Application Support</em> folder see: <a href="#img-dbloc">Figure 3</a></p>
<div class="paragraph">
<p>In this example, we are logging in with a user email Id of <em>"<a href="mailto:demo@example.com">demo@example.com</a>"</em>.</p>
</div>
</li>
<li>
<p>Open the folder in your Finder app and verify that a Database with name <em>"univerities"</em> exists along with a user specific Database with name <em>"userprofile"</em></p>
</li>
</ol>
</div>
</div>
</div>
<div id="ex-sample-output" class="exampleblock">
<div class="title">Example 5. Sample output</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">Will open Prebuilt DB  at path /Users/priya.rajagopal/Library/Developer/CoreSimulator/Devices/E4E62394-9940-4AF8-92FC-41E3C794B216/data/Containers/Data/Application/A9425551-7F52-461D-B4F5-CC04315154D6/Library/Application Support

2018-05-04 17:04:16.319360-0400 UserProfileDemo[54115:13479070] CouchbaseLite/2.0.0 (Swift; iOS 11.3; iPhone) Build/806 Commit/2f2a2097+CHANGES LiteCore/2.0.0 (806)

2018-05-04 17:04:16.319721-0400 UserProfileDemo[54115:13479070] CouchbaseLite minimum log level is Verbose
Will open/create DB  at path /Users/priya.rajagopal/Library/Developer/CoreSimulator/Devices/E4E62394-9940-4AF8-92FC-41E3C794B216/data/Containers/Data/Application/A9425551-7F52-461D-B4F5-CC04315154D6/Library/Application Support/demo@example.com</code></pre>
</div>
</div>
</div>
</div>
<div id="img-dbloc" class="imageblock">
<div class="content">
<img src="_images/db_locations.png" alt="Database Locations">
</div>
<div class="title">Figure 3. Database location</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exploring-the-query-api"><a class="anchor" href="#exploring-the-query-api"></a>Exploring the Query API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Query API in Couchbase Lite is extensive.</p>
</div>
<div class="paragraph">
<p>In our app, we will be using the <code>QueryBuilder</code> API to make a simple <em>pattern matching</em> query using the <code>like</code> operator.</p>
</div>
<div class="sect2">
<h3 id="fetching-university-document"><a class="anchor" href="#fetching-university-document"></a>Fetching University Document</h3>
<div class="paragraph">
<p>From the "Your Profile" screen, when the user taps on the "University" cell, a search screen is displayed where the user can enter the search criteria (name and optionally, the location) for the university.</p>
</div>
<div class="paragraph">
<p>When the search criteria is entered, the local <em>"universities"</em> Database is queried for <a href="#The "University" Document">[The "University" Document]</a> documents that match the specified search criteria.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>UniversityPresenter.swift</strong> file and locate the <code>fetchUniversityRecords()</code> function.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift" data-source-url="https://github.com/ibsoln/userprofile-couchbase-mobile/blob/e33c1473d0bf0f738d3c39640302a46202256135/content/modules/userprofile/examples/UserProfileDemo/presenter/UniversityPresenter.swift">func fetchUniversitiesMatchingName( _ name:String,country countryStr:String?, handler:@escaping(_ universities:Universities?, _ error:Error?)-&gt;Void) {
    do {</code></pre>
</div>
</div>
</li>
<li>
<p>We build the Query using the <code>QueryBuilder</code> API that will look for Documents that match the specified criteria.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift" data-source-url="https://github.com/ibsoln/userprofile-couchbase-mobile/blob/e33c1473d0bf0f738d3c39640302a46202256135/content/modules/userprofile/examples/UserProfileDemo/presenter/UniversityPresenter.swift">var whereQueryExpr = Function.lower(Expression.property(UniversityDocumentKeys.name.rawValue))
    .like(Expression.string("%\(name.lowercased())%")) <i class="conum" data-value="1"></i><b>(1)</b>

if let countryExpr = countryStr {
    let countryQueryExpr = Function.lower(Expression.property(UniversityDocumentKeys.country.rawValue))
        .like(Expression.string("%\(countryExpr.lowercased())%"))

    whereQueryExpr = whereQueryExpr.and(countryQueryExpr) <i class="conum" data-value="2"></i><b>(2)</b>
}

let universityQuery = QueryBuilder.select(SelectResult.all()) <i class="conum" data-value="3"></i><b>(3)</b>
    .from(DataSource.database(db)) <i class="conum" data-value="4"></i><b>(4)</b>
    .where(whereQueryExpr) <i class="conum" data-value="5"></i><b>(5)</b>

print(try? universityQuery.explain())</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Build a <code>QueryExpression</code> that uses the <code>like</code> operator to look for the specified <em>"name"</em> string in the <em>"name"</em> property.
Notice couple of things here:<br>
(a)
The use of <strong>wildcard "%" operator</strong> to denote that we are looking for the presence of the string anywhere in the <em>"name"</em> property and<br>
(b)
The use of <code>Function.lowercase()</code> to convert the search string into lowercase equivalent.
Since <code>like</code> operator does <em>case-senstive matching</em>, we convert the search string and the property value to lowercase equivalents and compare the two.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>If the location criteria was specified in the search, then Build a <code>QueryExpression</code> that uses the <code>like</code> operator to look for the specified <em>"location"</em> string in the <em>"location"</em> property.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>SelectResult.all()</code> specifiees that we are interested in all properties in Documents that match the specified criteria</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>DataSource.database(db)</code> specified the Data Source</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>We include the <code>where</code> clause that is the logical ANDing of the QueryExpression in &lt;1&gt; and &lt;2&gt;</td>
</tr>
</table>
</div>
</li>
<li>
<p>We run the Query by calling the <code>execute()</code> method on the Query that was constructed in the previous step</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift" data-source-url="https://github.com/ibsoln/userprofile-couchbase-mobile/blob/e33c1473d0bf0f738d3c39640302a46202256135/content/modules/userprofile/examples/UserProfileDemo/presenter/UniversityPresenter.swift">var universities = Universities()

for result in try universityQuery.execute() {
    if let university = result.dictionary(forKey: "universities"){

        var universityRecord = UniversityRecord() <i class="conum" data-value="1"></i><b>(1)</b>
        universityRecord.name =  university.string(forKey: UniversityDocumentKeys.name.rawValue) <i class="conum" data-value="2"></i><b>(2)</b>
        universityRecord.country  =  university.string(forKey: UniversityDocumentKeys.country.rawValue)
        universityRecord.webPages  =  university.array(forKey: UniversityDocumentKeys.webPages.rawValue)?.toArray() as? [String] <i class="conum" data-value="3"></i><b>(3)</b>

        universities.append(universityRecord)

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create an instance of <a href="#universityrecord">UniversityRecord</a> type</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use specific type getters to fetch property values.
The <a href="#universityrecord">UniversityRecord</a> instance is populated with these property values.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Getters also available for <code>array</code> types.
This returns a Couchbase Lite <code>ArrayObject</code> type.
So you would have to use <code>toArray()</code> to convert the Couchbase Lite native array equivalent.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Try Out the Query</div>
<div class="paragraph">
<p>You should have followed the steps discussed in the "Try It Out" section under <a href="#loading-the-prebuilt-database">Loading the Prebuilt Database</a></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Tap on "University" table cell</p>
</li>
<li>
<p>You should see a screen show that allows you enter the search criteria for the university</p>
</li>
<li>
<p>Enter "Harv" for name .
You can optionally enter "united states" for location</p>
</li>
<li>
<p>Confirm that you see a list of universities that match the criteria &#8201;&#8212;&#8201;see: <a href="#ex-try-out-query">Example 6</a>&#8201;&#8212;&#8201;<em>List</em> tab</p>
</li>
<li>
<p>Select a university</p>
</li>
<li>
<p>Press "Done" button</p>
</li>
<li>
<p>Confirm that the university you selected shows up in the University table cell &#8201;&#8212;&#8201;see: <a href="#ex-try-out-query">Example 6</a>&#8201;&#8212;&#8201;<em>Selection</em> tab<br>
You can optionally fill in other entries in the User Profile screen</p>
</li>
<li>
<p>Tap "Done" button</p>
</li>
<li>
<p>Confirm that you see an alert message "Successfully Updated Profile".<br>
The Document will be updated this time.</p>
</li>
<li>
<p>Tap "Log Off" and log out of the app</p>
</li>
<li>
<p>Log back into the app with the same user email Id and password that you used earlier.
In my example, I used <em>"<a href="mailto:demo@example.com">demo@example.com</a>"</em> and <em>"password"</em>.
So I will log in with those credentials again.</p>
</li>
<li>
<p>Confirm that you see the profile screen  with the <em>university</em> value that you set earlier&#8201;&#8212;&#8201;see: <a href="#ex-try-out-query">Example 6</a>&#8201;&#8212;&#8201;<em>Log Off/On</em> tab</p>
</li>
</ol>
</div>
</div>
</div>
<div id="ex-try-out-query" class="exampleblock">
<div class="title">Example 6. Try Out the Query</div>
<div class="content">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_list"></a>List</p>
</li>
<li>
<p><a id="tabset1_selection"></a>Selection</p>
</li>
<li>
<p><a id="tabset1_log-off-on"></a>Log Off/On</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_list">
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/couchbaselabs/userprofile-couchbase-mobile/query/content/modules/userprofile/assets/images/university_list.gif" alt="University List">
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_selection">
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/couchbaselabs/userprofile-couchbase-mobile/query/content/modules/userprofile/assets/images/university_selection.gif" alt="University Selection">
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_log-off-on">
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/couchbaselabs/userprofile-couchbase-mobile/query/content/modules/userprofile/assets/images/profile_update.gif" alt="Log Off and Log Back On">
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="learn-more"><a class="anchor" href="#learn-more"></a>Learn More</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Congratulations on completing this tutorial!</p>
</div>
<div class="paragraph">
<p>This tutorial walked you through an example of how to use a pre-built Couchbase Lite database.
We looked at a simple Query example.
Check out the following links for further details on the Query API including a Xcode playground for testing the APIs.</p>
</div>
<div class="sect2">
<h3 id="further-reading"><a class="anchor" href="#further-reading"></a>Further Reading</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://blog.couchbase.com/xcode-playground-couchbase-mobile/">Xcode Playground For Couchbase Lite</a></p>
</li>
<li>
<p><a href="https://blog.couchbase.com/sql-for-json-query-interface-couchbase-mobile/">Fundamentals of the Couchbase Lite Query API</a></p>
</li>
<li>
<p><a href="https://blog.couchbase.com/querying-array-collections-couchbase-mobile/">Handling Arrays in Queries</a></p>
</li>
<li>
<p><a href="https://blog.couchbase.com/full-text-search-couchbase-mobile-2-0/">Couchbase Lite Full Text Search API</a></p>
</li>
<li>
<p><a href="https://blog.couchbase.com/join-queries-couchbase-mobile/">Couchbase Lite JOIN Query</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>Â© 2021 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
